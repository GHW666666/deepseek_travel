import{d as M,x as g,v as C,s as k,Y as z,c as N,Z as v,M as L,X as j,b as a,m as b,p as U,P as F,$ as V,a0 as q,a1 as D,E,e as w,a2 as G,F as H,r as X,G as Y,a3 as Z,w as _}from"./index-BmxogOyr.js";let f=0;function $(e){e?(f||document.body.classList.add("van-toast--unclickable"),f++):f&&(f--,f||document.body.classList.remove("van-toast--unclickable"))}const[A,i]=N("toast"),J=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],K={icon:String,show:Boolean,type:k("text"),overlay:Boolean,message:g,iconSize:g,duration:z(2e3),position:k("middle"),teleport:[String,Object],wordBreak:String,className:C,iconPrefix:String,transition:k("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:C,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:g};var O=M({name:A,props:K,emits:["update:show"],setup(e,{emit:t,slots:s}){let l,c=!1;const r=()=>{const n=e.show&&e.forbidClick;c!==n&&(c=n,$(c))},d=n=>t("update:show",n),y=()=>{e.closeOnClick&&d(!1)},u=()=>clearTimeout(l),P=()=>{const{icon:n,type:o,iconSize:h,iconPrefix:T,loadingType:B}=e;if(n||o==="success"||o==="fail")return a(V,{name:n||o,size:h,class:i("icon"),classPrefix:T},null);if(o==="loading")return a(q,{class:i("loading"),size:h,type:B},null)},I=()=>{const{type:n,message:o}=e;if(s.message)return a("div",{class:i("text")},[s.message()]);if(D(o)&&o!=="")return n==="html"?a("div",{key:0,class:i("text"),innerHTML:String(o)},null):a("div",{class:i("text")},[o])};return v(()=>[e.show,e.forbidClick],r),v(()=>[e.show,e.type,e.message,e.duration],()=>{u(),e.show&&e.duration>0&&(l=setTimeout(()=>{d(!1)},e.duration))}),L(r),j(r),()=>a(F,b({class:[i([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:y,onClosed:u,"onUpdate:show":d},U(e,J)),{default:()=>[P(),I()]})}});const Q={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let m=[],R=!1,p=w({},Q);const W=new Map;function S(e){return G(e)?e:{message:e}}function ee(){const{instance:e}=H({setup(){const t=X(""),{open:s,state:l,close:c,toggle:r}=Y(),d=()=>{},y=()=>a(O,b(l,{onClosed:d,"onUpdate:show":r}),null);return v(t,u=>{l.message=u}),Z().render=y,{open:s,close:c,message:t}}});return e}function te(){if(!m.length||R){const e=ee();m.push(e)}return m[m.length-1]}function ne(e={}){if(!E)return{};const t=te(),s=S(e);return t.open(w({},p,W.get(s.type||p.type),s)),t}const x=e=>t=>ne(w({type:e},S(t))),ae=x("success"),ie=x("fail");_(O);export{ie as a,ae as b,ne as s};
